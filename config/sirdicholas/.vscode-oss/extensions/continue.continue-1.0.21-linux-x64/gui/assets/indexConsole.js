import{r as h,j as e,F as L,a as O,b as P,c as U,d as D,R as G,e as A}from"./XCircleIcon.js";function z({title:r,titleId:t,...s},o){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},s),r?h.createElement("title",{id:t},r):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9.563C9 9.252 9.252 9 9.563 9h4.874c.311 0 .563.252.563.563v4.874c0 .311-.252.563-.563.563H9.564A.562.562 0 0 1 9 14.437V9.564Z"}))}const H=h.forwardRef(z),R=32;function J(r,t){let s=r.results[r.results.length-1];s==null||s.length==R?r.results.push([t]):s.push(t)}function V(r){r.results;let t=r.results[r.results.length-1],s;return t==null||t.length==R?s=[...r.results]:(s=r.results.slice(0,-1),s.push([...t])),{...r,results:s}}function I(r,t){const s=r.interactions,o=new Map;let n=r.order,l=!1;for(const c of t){let a=o.get(c.interactionId);if(a===void 0){const i=s.get(c.interactionId);i?a=V(i):(a={results:[]},l?n.push(c.interactionId):(n=[...n,c.interactionId],l=!0)),o.set(c.interactionId,a)}switch(c.kind){case"startChat":case"startComplete":case"startFim":a.start=c;break;case"chunk":case"message":J(a,c);break;case"success":case"error":case"cancel":a.end=c;break}}for(const c of s.keys())o.has(c)||o.set(c,s.get(c));return{loading:!1,interactions:o,order:n}}function Z(r,t){const s=new Map(r.interactions);s.delete(t);const o=r.order.filter(n=>n!==t);return{loading:!1,interactions:s,order:o}}function _(){const[r,t]=h.useReducer((s,o)=>{switch(o.type){case"init":return I(s,o.items);case"item":return I(s,[o.item]);case"remove":return Z(s,o.interactionId);case"clear":return{loading:!1,interactions:new Map,order:[]}}},{loading:!0,interactions:new Map,order:[]});return h.useEffect(function(){const s=crypto.randomUUID(),o=n=>{n.data.uuid===s&&t(n.data)};return window.addEventListener("message",o),vscode.postMessage({type:"start",uuid:s}),()=>{vscode.postMessage({type:"stop",uuid:s}),window.removeEventListener("message",o)}},[]),r}function q(r,t){const s=r.toLowerCase(),o={"claude-3-opus":{input:15,output:75,cacheWrite:18.75,cacheRead:1.5},"claude-3-opus-20240229":{input:15,output:75,cacheWrite:18.75,cacheRead:1.5},"claude-3-5-sonnet":{input:3,output:15,cacheWrite:3.75,cacheRead:.3},"claude-3-5-sonnet-20241022":{input:3,output:15,cacheWrite:3.75,cacheRead:.3},"claude-3-5-sonnet-20240620":{input:3,output:15,cacheWrite:3.75,cacheRead:.3},"claude-3-5-haiku":{input:.8,output:4,cacheWrite:1,cacheRead:.08},"claude-3-5-haiku-20241022":{input:.8,output:4,cacheWrite:1,cacheRead:.08},"claude-3-haiku":{input:.25,output:1.25,cacheWrite:.3,cacheRead:.03},"claude-3-haiku-20240307":{input:.25,output:1.25,cacheWrite:.3,cacheRead:.03}};let n=o[s];if(!n){for(const[u,p]of Object.entries(o))if(s.includes(u)||u.includes(s)){n=p;break}}if(n||(s.includes("opus")?n=o["claude-3-opus"]:s.includes("sonnet")?n=o["claude-3-5-sonnet"]:s.includes("haiku")&&(n=o["claude-3-5-haiku"])),!n)return null;const l=t.promptTokens/1e6*n.input,c=t.completionTokens/1e6*n.output,a=[];t.promptTokens>0&&a.push(`Input: ${t.promptTokens.toLocaleString()} tokens × $${n.input}/MTok = $${l.toFixed(6)}`),t.completionTokens>0&&a.push(`Output: ${t.completionTokens.toLocaleString()} tokens × $${n.output}/MTok = $${c.toFixed(6)}`);let i=0;if(t.promptTokensDetails){const{cachedTokens:u,cacheWriteTokens:p}=t.promptTokensDetails;if(p&&p>0){const f=p/1e6*n.cacheWrite;i+=f,a.push(`Cache Write: ${p.toLocaleString()} tokens × $${n.cacheWrite}/MTok = $${f.toFixed(6)}`)}if(u&&u>0){const f=u/1e6*n.cacheRead;i+=f,a.push(`Cache Read: ${u.toLocaleString()} tokens × $${n.cacheRead}/MTok = $${f.toFixed(6)}`)}}const m=l+c+i;let d=`Model: ${r}
`;return d+=a.join(`
`),a.length>1&&(d+=`
Total: $${m.toFixed(6)}`),{cost:m,breakdown:d}}function $(r,t,s){switch(r){case"anthropic":return q(t,s);default:return null}}function W(r){return h.useMemo(()=>{var d,u,p,f,x;if(r.start==null)return{result:"",type:""};const t=r.start.kind.slice(5);let s;switch((d=r.end)==null?void 0:d.kind){case"cancel":s="Cancelled";break;case"error":s="Error";break;case"success":s="Success";break;case void 0:s=""}let o,n,l,c,a,i;if(r.start!=null&&r.results.length>0){const g=r.results[0],b=g?g[0]:void 0;n=b?b.timestamp-r.start.timestamp:void 0}if(r.end!=null)o=r.end.timestamp-r.start.timestamp,c=r.end.promptTokens,a=r.end.generatedTokens,i=r.end.thinkingTokens,n!=null&&(l=(a+i)/((o-n)/1e3));else{const g=r.results[r.results.length-1],b=g?g[g.length-1]:void 0;o=b?b.timestamp-r.start.timestamp:void 0}let m=null;return(u=r.end)!=null&&u.usage&&((p=r.start)!=null&&p.provider)&&((x=(f=r.start)==null?void 0:f.options)!=null&&x.model)&&(m=$(r.start.provider,r.start.options.model,r.end.usage)),{result:s,type:t,totalTime:o,toFirstToken:n,tokensPerSecond:l,promptTokens:c,generatedTokens:a,thinkingTokens:i,costBreakdown:m}},[r])}function X({item:r}){switch(r.kind){case"success":return e.jsx(e.Fragment,{});case"error":return e.jsxs("div",{children:[e.jsx("span",{className:"text-[color:var(--vscode-statusBarItem-errorForeground) m-0.5 inline-block rounded-sm bg-[color:var(--vscode-statusBarItem-errorBackground)] p-0.5",children:"Error"}),r.message]});case"cancel":return e.jsx("div",{children:e.jsx("span",{className:"text-[color:var(--vscode-statusBarItem-warningForeground) m-0.5 inline-block rounded-sm bg-[color:var(--vscode-statusBarItem-warningBackground)] p-0.5",children:"Cancelled"})})}}function S(r){return e.jsx("span",{className:"whitespace-pre-wrap",children:r})}function T(r){return e.jsx("div",{children:e.jsx("span",{className:"bg-[color:var(--vscode-list-inactiveSelectionBackground)] text-xs",children:r})})}function F(r){return typeof r.content=="string"?S(r.content):r.content.map(t=>t.type=="text"?S(t.text):e.jsxs("div",{children:["Image: ",t.imageUrl.url]}))}function y(r,t){switch(r.role){case"assistant":return e.jsxs(e.Fragment,{children:[t?T(r.role):"",r.toolCalls?r.toolCalls.map(s=>e.jsxs("pre",{children:["Tool call: ",JSON.stringify(s,void 0,2)]},s.id)):"",F(r)]});case"thinking":return e.jsxs(e.Fragment,{children:[t?T(r.role):"",r.toolCalls?r.toolCalls.map(s=>e.jsxs("pre",{children:["Tool call: ",JSON.stringify(s,void 0,2)]})):"",F(r),r.redactedThinking&&e.jsxs("pre",{children:["Redacted Thinking: ",r.redactedThinking]}),r.signature&&e.jsxs("pre",{children:["Signature: ",r.signature]})]});case"user":return e.jsxs(e.Fragment,{children:[t?T(r.role):"",F(r)]});case"system":return e.jsxs(e.Fragment,{children:[t?T(r.role):"",S(r.content)]});case"tool":return e.jsxs(e.Fragment,{children:[t?T(r.role):"",e.jsxs("pre",{children:["Tool Call ID: ",r.toolCallId]}),S(r.content)]})}}const K=h.memo(function({message:t}){return y(t,!0)}),Q=h.memo(function({result:t,prevResult:s}){switch(t.kind){case"chunk":return e.jsx("span",{children:t.chunk});case"message":switch(t.message.role){case"assistant":case"thinking":const o=!((s==null?void 0:s.kind)==="message"&&s.message.role===t.message.role);return y(t.message,o);default:return e.jsx("div",{className:"border-[color:var(--vscode-panel-border) border-2 border-solid p-1",children:y(t.message,!0)})}break}}),Y=h.memo(function({group:t}){return e.jsx(e.Fragment,{children:t.map((s,o)=>e.jsx(Q,{result:s,prevResult:t[o-1]},`${s.timestamp}-${o}`))})});function k({label:r,children:t}){const[s,o]=h.useState(!1);return e.jsxs("div",{children:[e.jsxs("div",{className:"text-base",onClick:()=>o(!s),children:[s?e.jsx(L,{className:"h-[16px] w-[16px]"}):e.jsx(O,{className:"h-[16px] w-[16px]"})," ",e.jsx("span",{className:"align-top text-sm font-bold",children:r})]}),s&&e.jsx("div",{children:t})]})}function ee({item:r}){return e.jsx("div",{className:"border-0 border-b-2 border-solid border-[color:var(--vscode-panel-border)] p-1",children:(()=>{switch(r.kind){case"startChat":return e.jsxs(e.Fragment,{children:[e.jsx(k,{label:"Prompt",children:e.jsx("div",{className:"p-1",children:r.messages.map((t,s)=>e.jsx(K,{message:t},s))})}),e.jsx(k,{label:"Options",children:e.jsx("pre",{className:"m-0",children:JSON.stringify(r.options,void 0,2)})})]});case"startComplete":return e.jsxs(e.Fragment,{children:[e.jsx(k,{label:"Prompt",children:e.jsx("pre",{className:"m-0",children:r.prompt})}),e.jsx(k,{label:"Options",children:e.jsx("pre",{className:"m-0",children:JSON.stringify(r.options,void 0,2)})})]});case"startFim":return e.jsxs(e.Fragment,{children:[e.jsx(k,{label:"Prefix",children:e.jsx("pre",{className:"m-0",children:r.prefix})}),e.jsx(k,{label:"Suffix",children:e.jsx("pre",{className:"m-0",children:r.suffix})}),e.jsx(k,{label:"Options",children:e.jsx("pre",{className:"m-0",children:JSON.stringify(r.options,void 0,2)})})]})}})()})}function B({interaction:r}){if(r.end)switch(r.end.kind){case"success":return e.jsx(U,{className:"relative top-[2px] -mt-[2px] h-[16px] w-[16px] pr-[2px] text-[color:var(--vscode-charts-green)]"});case"cancel":return e.jsx(H,{className:"relative top-[2px] -mt-[2px] h-[16px] w-[16px] pr-[2px] text-[color:var(--vscode-list-warningForeground)]"});case"error":return e.jsx(P,{className:"relative top-[2px] -mt-[2px] h-[16px] w-[16px] pr-[2px] text-[color:var(--vscode-list-errorForeground)]"})}else return e.jsx(D,{className:"relative top-[2px] -mt-[2px] h-[16px] w-[16px] pr-[2px]"})}function E(r){return e.jsx("div",{className:"border-0 border-r-2 border-solid border-[color:var(--vscode-panel-border)] pl-2 pr-2 text-sm",children:r})}function j({label:r,value:t,format:s}){return E(t!=null?`${r}: ${s?s(t):t}`:"")}function re({children:r}){return E(r)}function M(r){return(r/1e3).toFixed(2)+"s"}function te({interaction:r}){const t=h.useRef(null),s=h.useRef(null),o=W(r),[n,l]=h.useState(!0);function c(){const a=t.current;if(!a)return;l(a.scrollHeight-a.scrollTop-a.clientHeight<5)}return h.useEffect(()=>{var i;if(r.end)return;const a=r.results[r.results.length-1];if(a!=s.current&&(s.current=a,n)){const m=(i=t.current)==null?void 0:i.lastChild;m&&m.scrollIntoView({behavior:"auto",block:"end"})}},[r,n]),e.jsxs("div",{className:"m-0 flex min-w-0 flex-1 shrink grow flex-col",children:[e.jsxs("div",{className:"shrink-0 text-base",children:[e.jsxs("div",{className:"columns-3 gap-0 border-0 border-b-2 border-solid border-[color:var(--vscode-panel-border)] p-0",children:[e.jsx(j,{label:"Type",value:o.type}),e.jsxs(re,{children:["Result: ",e.jsx(B,{interaction:r}),o.result]})]}),e.jsxs("div",{className:"columns-3 gap-0 border-0 border-b-2 border-solid border-[color:var(--vscode-panel-border)] p-0",children:[e.jsx(j,{label:"Prompt Tokens",value:o.promptTokens}),e.jsx(j,{label:"Generated Tokens",value:o.generatedTokens}),e.jsx(j,{label:"ThinkingTokens",value:o.thinkingTokens})]}),e.jsxs("div",{className:"columns-3 gap-0 border-0 border-b-2 border-solid border-[color:var(--vscode-panel-border)] p-0",children:[e.jsx(j,{label:"Total Time",value:o.totalTime,format:M}),e.jsx(j,{label:"To First Token",value:o.toFirstToken,format:M}),e.jsx(j,{label:"Tokens/s",value:o.tokensPerSecond,format:a=>a.toFixed(1)})]})]}),e.jsxs("div",{ref:t,className:"grow overflow-auto",onScroll:c,children:[r.start?e.jsx(ee,{item:r.start}):"",e.jsx("div",{className:"whitespace-pre-wrap p-2",children:r.results.map((a,i)=>e.jsx(Y,{group:a},i))}),r.end?e.jsx(X,{item:r.end}):""]})]})}function se(r){const t=new Date(r),s=t.getHours().toString().padStart(2,"0"),o=t.getMinutes().toString().padStart(2,"0"),n=t.getSeconds(),l=t.getMilliseconds(),c=`${n}.${Math.floor(l/100)}`;return`${s}:${o}:${c.padStart(4,"0")}`}function oe({interactionId:r,interaction:t,onClickInteraction:s,selected:o}){const n=W(t);return e.jsxs("li",{className:"w-full cursor-pointer pb-[3px] pl-[4px] pr-[4px] pt-[3px] "+(o?"bg-[color:var(--vscode-list-inactiveSelectionBackground)] text-[color:var(--vscode-list-inctiveSelectionForeground)] group-focus-within:bg-[color:var(--vscode-list-activeSelectionBackground)] group-focus-within:text-[color:var(--vscode-list-activeSelectionForeground)]":"hover:bg-[color:var(--vscode-list-inactiveSelectionBackground)]"),onClick:()=>s(r),children:[e.jsx(B,{interaction:t})," ",e.jsx("span",{className:"inline-block w-[70px]",children:t.start?se(t.start.timestamp):""}),e.jsx("span",{className:"inline-block",children:n.type})]},r)}function ne({llmLog:r,onClickInteraction:t}){const s=h.useRef(null),[o,n]=h.useState(void 0),l=h.useRef(0);return h.useEffect(()=>{var c;if(r.order.length!=l.current){n(r.order[r.order.length-1]),t(r.order[r.order.length-1]),l.current=r.order.length;const a=(c=s.current)==null?void 0:c.lastChild;a&&a.scrollIntoView({behavior:"smooth",block:"end"})}}),e.jsx("ul",{tabIndex:1,ref:s,className:"group m-0 w-[150px] flex-none list-none overflow-auto border-0 border-r-2 border-solid border-[color:var(--vscode-panel-border)] p-0",children:r.order.map(c=>e.jsx(oe,{interactionId:c,interaction:r.interactions.get(c),onClickInteraction:a=>{var i;(i=s.current)==null||i.focus(),n(a),t(a)},selected:c==o},c))})}function ce(r){return h.useMemo(()=>{var p,f,x,g,b;let t=0,s=0,o=0,n=0,l=0,c=0,a=0,i=0,m=0,d=0;const u=[];for(const v of r.interactions.values())if(v.end){if(c++,t+=v.end.promptTokens||0,s+=v.end.generatedTokens||0,o+=v.end.thinkingTokens||0,v.end.usage){const w=v.end.usage;if(n+=((p=w.promptTokensDetails)==null?void 0:p.cachedTokens)||0,l+=((f=w.promptTokensDetails)==null?void 0:f.cacheWriteTokens)||0,(x=v.start)!=null&&x.provider&&((b=(g=v.start)==null?void 0:g.options)!=null&&b.model)){const N=$(v.start.provider,v.start.options.model,w);N&&(d+=N.cost,u.push(N))}}switch(v.end.kind){case"success":a++;break;case"error":i++;break;case"cancel":m++;break}}return{totalPromptTokens:t,totalGeneratedTokens:s,totalThinkingTokens:o,totalCachedTokens:n,totalCacheWriteTokens:l,totalInteractions:c,totalSuccessfulInteractions:a,totalErrorInteractions:i,totalCancelledInteractions:m,totalCost:d,costBreakdowns:u}},[r])}const C=({label:r,value:t,color:s="var(--vscode-foreground)"})=>e.jsxs("div",{className:"flex flex-col items-center rounded-lg border border-[color:var(--vscode-panel-border)] bg-[color:var(--vscode-editor-background)] p-3",children:[e.jsx("div",{className:"text-sm text-[color:var(--vscode-descriptionForeground)]",children:r}),e.jsx("div",{className:"text-lg font-semibold",style:{color:s},children:t.toLocaleString()})]}),ae=({llmLog:r})=>{const t=h.useMemo(()=>{let d=0;const u=[];return r.order.forEach((p,f)=>{var g,b,v,w;const x=r.interactions.get(p);if((g=x==null?void 0:x.end)!=null&&g.usage&&((b=x.start)!=null&&b.provider)&&((w=(v=x.start)==null?void 0:v.options)!=null&&w.model)){const N=$(x.start.provider,x.start.options.model,x.end.usage);N&&(d+=N.cost)}u.push({interaction:f+1,cost:d})}),u},[r.order,r.interactions]);if(t.length===0||t[t.length-1].cost===0)return null;const s=Math.max(...t.map(d=>d.cost)),o=t.length,n=400,l=200,c=40,a=d=>(d-1)/(o-1)*(n-2*c)+c,i=d=>l-c-d/s*(l-2*c),m=t.map((d,u)=>`${u===0?"M":"L"} ${a(d.interaction)} ${i(d.cost)}`).join(" ");return e.jsxs("div",{className:"mb-4 rounded-lg border border-[color:var(--vscode-panel-border)] bg-[color:var(--vscode-editor-background)] p-4",children:[e.jsx("h3",{className:"mb-3 text-sm font-semibold text-[color:var(--vscode-foreground)]",children:"Cumulative Cost Over Interactions"}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("svg",{width:n,height:l,className:"overflow-visible",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 20 0 L 0 0 0 20",fill:"none",stroke:"var(--vscode-panel-border)",strokeWidth:"0.5",opacity:"0.3"})})}),e.jsx("rect",{width:n,height:l,fill:"url(#grid)"}),e.jsx("rect",{x:c,y:c,width:n-2*c,height:l-2*c,fill:"var(--vscode-editor-background)",stroke:"var(--vscode-panel-border)",strokeWidth:"1"}),e.jsx("path",{d:m,fill:"none",stroke:"var(--vscode-charts-green)",strokeWidth:"2",strokeLinecap:"round"}),t.map((d,u)=>e.jsx("circle",{cx:a(d.interaction),cy:i(d.cost),r:"3",fill:"var(--vscode-charts-green)",stroke:"var(--vscode-editor-background)",strokeWidth:"1"},u)),[0,.25,.5,.75,1].map(d=>{const u=s*d,p=i(u);return e.jsxs("g",{children:[e.jsx("line",{x1:c-5,y1:p,x2:c,y2:p,stroke:"var(--vscode-foreground)",strokeWidth:"1"}),e.jsxs("text",{x:c-8,y:p+4,textAnchor:"end",fontSize:"10",fill:"var(--vscode-descriptionForeground)",children:["$",u.toFixed(4)]})]},d)}),[0,.25,.5,.75,1].map(d=>{const u=Math.round(1+d*(o-1)),p=a(u);return e.jsxs("g",{children:[e.jsx("line",{x1:p,y1:l-c,x2:p,y2:l-c+5,stroke:"var(--vscode-foreground)",strokeWidth:"1"}),e.jsx("text",{x:p,y:l-c+18,textAnchor:"middle",fontSize:"10",fill:"var(--vscode-descriptionForeground)",children:u})]},d)}),e.jsx("text",{x:n/2,y:l-5,textAnchor:"middle",fontSize:"12",fill:"var(--vscode-foreground)",children:"Interaction Number"}),e.jsx("text",{x:15,y:l/2,textAnchor:"middle",fontSize:"12",fill:"var(--vscode-foreground)",transform:`rotate(-90 15 ${l/2})`,children:"Cumulative Cost ($)"})]})})]})},le=({llmLog:r})=>{const t=ce(r),[s,o]=h.useState(!1);return e.jsxs("div",{className:"border-b border-[color:var(--vscode-panel-border)] p-4",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-[color:var(--vscode-foreground)]",children:"Total Usage Summary"}),e.jsxs("div",{className:"flex items-center gap-4",children:[t.totalCost>0&&e.jsxs("button",{onClick:()=>o(!s),className:"cursor-pointer text-lg font-semibold text-[color:var(--vscode-charts-green)] hover:text-[color:var(--vscode-charts-blue)]",children:["$",t.totalCost.toFixed(6)]}),e.jsxs("div",{className:"text-sm text-[color:var(--vscode-descriptionForeground)]",children:[t.totalInteractions," interactions"]})]})]}),s&&t.costBreakdowns.length>0&&e.jsxs("div",{className:"mb-4 max-h-32 overflow-y-auto rounded border border-[color:var(--vscode-panel-border)] bg-[color:var(--vscode-editor-background)] p-3",children:[e.jsx("h3",{className:"mb-2 text-sm font-semibold text-[color:var(--vscode-foreground)]",children:"Cost Breakdown"}),e.jsx("div",{className:"space-y-2 text-xs",children:t.costBreakdowns.map((n,l)=>e.jsx("div",{className:"border-b border-[color:var(--vscode-panel-border)] pb-2 last:border-b-0",children:e.jsx("pre",{className:"whitespace-pre-wrap text-[color:var(--vscode-descriptionForeground)]",children:n.breakdown})},l))})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3 md:grid-cols-4",children:[e.jsx(C,{label:"Input Tokens",value:t.totalPromptTokens,color:"var(--vscode-charts-blue)"}),e.jsx(C,{label:"Output Tokens",value:t.totalGeneratedTokens,color:"var(--vscode-charts-green)"}),e.jsx(C,{label:"Thinking Tokens",value:t.totalThinkingTokens,color:"var(--vscode-charts-purple)"}),e.jsx(C,{label:"Cache Read",value:t.totalCachedTokens,color:"var(--vscode-charts-orange)"})]}),t.totalCost>0&&e.jsxs(e.Fragment,{children:[e.jsx(ae,{llmLog:r}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-col items-center rounded-lg border border-[color:var(--vscode-panel-border)] bg-[color:var(--vscode-editor-background)] p-3",children:[e.jsx("div",{className:"text-sm text-[color:var(--vscode-descriptionForeground)]",children:"Total Cost"}),e.jsxs("div",{className:"text-2xl font-bold text-[color:var(--vscode-charts-green)]",children:["$",t.totalCost.toFixed(6)]}),e.jsxs("div",{className:"text-xs text-[color:var(--vscode-descriptionForeground)]",children:[t.costBreakdowns.length," cost calculations"]})]})})]}),t.totalCacheWriteTokens>0&&e.jsxs("div",{className:"mb-4 grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsx(C,{label:"Cache Write",value:t.totalCacheWriteTokens,color:"var(--vscode-charts-red)"}),e.jsx("div",{className:"flex items-center justify-center rounded-lg border border-[color:var(--vscode-panel-border)] bg-[color:var(--vscode-editor-background)] p-3",children:e.jsxs("div",{className:"text-sm text-[color:var(--vscode-descriptionForeground)]",children:["Cache Hit Rate:"," ",t.totalPromptTokens>0?(t.totalCachedTokens/t.totalPromptTokens*100).toFixed(1):"0","%"]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{className:"rounded border border-[color:var(--vscode-panel-border)] bg-[color:var(--vscode-editor-background)] p-2 text-center",children:[e.jsx("div",{className:"text-[color:var(--vscode-charts-green)]",children:t.totalSuccessfulInteractions}),e.jsx("div",{className:"text-[color:var(--vscode-descriptionForeground)]",children:"Success"})]}),e.jsxs("div",{className:"rounded border border-[color:var(--vscode-panel-border)] bg-[color:var(--vscode-editor-background)] p-2 text-center",children:[e.jsx("div",{className:"text-[color:var(--vscode-charts-red)]",children:t.totalErrorInteractions}),e.jsx("div",{className:"text-[color:var(--vscode-descriptionForeground)]",children:"Error"})]}),e.jsxs("div",{className:"rounded border border-[color:var(--vscode-panel-border)] bg-[color:var(--vscode-editor-background)] p-2 text-center",children:[e.jsx("div",{className:"text-[color:var(--vscode-charts-yellow)]",children:t.totalCancelledInteractions}),e.jsx("div",{className:"text-[color:var(--vscode-descriptionForeground)]",children:"Cancelled"})]})]})]})};function de(){const r=_(),[t,s]=h.useState(void 0),[o,n]=h.useState(!1),l=t?r.interactions.get(t):void 0;return r.loading?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"flex h-full w-full",children:[e.jsx("div",{className:"flex h-full w-full flex-col",children:e.jsxs("div",{className:"flex min-h-0 flex-1 overflow-hidden",children:[e.jsx(ne,{llmLog:r,onClickInteraction:c=>{s(c)}}),l&&e.jsx(te,{interaction:l},"{selectedId}")]})}),o&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"relative h-full w-full max-w-6xl overflow-hidden bg-[color:var(--vscode-panel-background)] shadow-2xl",children:[e.jsx("button",{onClick:()=>n(!1),className:"absolute right-4 top-4 z-10 flex h-8 w-8 items-center justify-center rounded-full bg-[color:var(--vscode-button-background)] text-[color:var(--vscode-button-foreground)] transition-colors hover:bg-[color:var(--vscode-button-hoverBackground)]",children:"×"}),e.jsx("div",{className:"h-full overflow-y-auto p-6",children:e.jsx(le,{llmLog:r})})]})})]})}(async()=>G.createRoot(document.getElementById("root")).render(e.jsx(A.StrictMode,{children:e.jsx(de,{})})))();
